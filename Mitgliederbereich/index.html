<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="robots" content="noindex">
  <title>Mitgliederbereich – Reizende Runde</title>

  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <!-- Firebase Authentication -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
  
  <!-- Googles Fonts -->
  <!-- TODO: runterladen, hardcoden, und links entfernen -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link 
    href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&display=swap" 
    rel="stylesheet"
  >
  
  <!-- Link to your external CSS -->
  <link rel="stylesheet" href="../style.css">
  <link rel="stylesheet" href="style.css">  
</head>
<body>

  <!-- HEADER, TODO: Inhalte dynamisch ausm Backend laden -->
  <header>
    <a href=".." class="logo">Reizende Runde</a>
    
    <!-- Navigation -->
    <nav>
      <ul>
        <li><a href="../#about">Über uns</a></li>
        <li><a href="../#aktuelles">Aktuelles</a></li>
        <li><a href="../#termine">Termine</a></li>
        <li><a href="../#mitglied">Mitglied werden</a></li>
        <li><a href="../#kontakt">Kontakt</a></li>
      </ul>
    </nav>

    <div class="header-right">
      <div class="member-area">
        <a href="" class="member-btn">
          <i class="fas fa-user-lock"></i> Mitgliederbereich
        </a>
      </div>
      <div class="hamburger"><i class="fas fa-bars"></i></div>
    </div>
  </header>

  <!-- SIMPLE BANNER, TODO: Inhalte dynamisch ausm Backend laden-->
  <section class="simple-banner">
    <h1>Willkommen im Mitgliederbereich</h1>
    <p>Interne Inhalte für Mitglieder der Reizenden Runde</p>
  </section>

  <!-- MAIN CONTENT, TODO: Inhalte dynamisch ausm Backend (Database!!!) laden-->
  <main>
    <!-- Intro Section -->
    <section class="about" style="text-align:center; padding:2rem 1rem;">
      <h2>Interner Bereich</h2>
      <p>
        Hier findest du vereinsinternen Dokumente, Links, Regelfragen
        und vieles mehr.
      </p>
    </section>
    <div id="content">
      <section class="news" style="padding:1rem 1rem 3rem;">
        <h2 style="text-align:center;">Unsere Inhalte</h2>
        
        <div class="news-items" 
             style="display:grid; grid-template-columns:repeat(auto-fill,minmax(250px,1fr)); gap:1rem; max-width:1200px; margin:0 auto;">
    
          <!-- Card 1 -->
          <div class="news-item" 
               style="background-color:#f9f9f9; border-radius:4px; border-left:4px solid #b21f2d; overflow:hidden;">
            <a 
              id= "c1hrefimg"
              href="" 
              style="display:inline-block; margin-top:0.5rem; color:#b21f2d; font-weight:bold;"
              >
              <img 
                  id = "c1img"
                  src="" 
                  alt="" 
                  style="width:100%; object-fit:cover;"
              >
            </a>
            <div style="padding:1rem;">
              <h3 style="margin-bottom:0.5rem;">
                <a 
                  id = "c1href"
                  href="" 
                  style="display:inline-block; margin-top:0.5rem; color:#b21f2d; font-weight:bold;"
                >
                </a>
              </h3>
              <p id="c1description"></p>
              <a 
                id = "c1link"
                href="" 
                style="display:inline-block; margin-top:0.5rem; color:#b21f2d; font-weight:bold;"
              ></a>
            </div>
          </div>
    
          <!-- Card 2 -->
          <div class="news-item" 
               style="background-color:#f9f9f9; border-radius:4px; border-left:4px solid #b21f2d; overflow:hidden;">
            <a 
              href="../Rechner" 
              style="display:inline-block; margin-top:0.5rem; color:#b21f2d; font-weight:bold;"
            >
              <img 
                src="https://raw.githubusercontent.com/haumbaus/reizendewebsite/refs/heads/main/assets/rechner.webp" 
                alt="Punkte Rechner" 
                style="width:100%; object-fit:cover;"
              >
            </a>
            <div style="padding:1rem;">
              <h3 style="margin-bottom:0.5rem;">
                <a 
                  href="../Rechner"  
                  style="display:inline-block; margin-top:0.5rem; color:#b21f2d; font-weight:bold;"
                >
                  Punkte Rechner
                </a>
              </h3>
              <p>Interaktives Tool zum Berechnen von Reizwerten und Listenpunkten.</p>
              <a 
                href="../Rechner"  
                style="display:inline-block; margin-top:0.5rem; color:#b21f2d; font-weight:bold;"
              >
                Link zum Rechner
              </a>
            </div>
          </div>
    
          <!-- Card 3 -->
          <div class="news-item" 
               style="background-color:#f9f9f9; border-radius:4px; border-left:4px solid #b21f2d; overflow:hidden;">
            <a 
              href="../ListeEintragen" 
              style="display:inline-block; margin-top:0.5rem; color:#b21f2d; font-weight:bold;"
            >
              <img 
                src="https://raw.githubusercontent.com/haumbaus/reizendewebsite/refs/heads/main/assets/listen-eintragen.webp" 
                alt="Listen eintragen" 
                style="width:100%; object-fit:cover;"
              >
            </a>
            <div style="padding:1rem;">
              <h3 style="margin-bottom:0.5rem;">
                <a 
                  href="../ListeEintragen"  
                  style="display:inline-block; margin-top:0.5rem; color:#b21f2d; font-weight:bold;"
                >
                  Listen eintragen
                </a>
              </h3>
              <p>
                Hier kannst du die Daten zu einer abgeschlossenen Liste eintragen. 
                Die Eingaben werden an die Ewige Liste übergeben.
              </p>
              <a 
                href="../ListeEintragen"  
                style="display:inline-block; margin-top:0.5rem; color:#b21f2d; font-weight:bold;"
              >
                Link zum Formular
              </a>
            </div>
          </div>
    
          <!-- Card 4 (fixed) -->
          <div class="news-item" 
               style="background-color:#f9f9f9; border-radius:4px; border-left:4px solid #b21f2d; overflow:hidden;">
            <a 
              href="../ISkO" 
              style="display:inline-block; margin-top:0.5rem; color:#b21f2d; font-weight:bold;"
            >
              <img 
                src="https://raw.githubusercontent.com/haumbaus/reizendewebsite/refs/heads/main/assets/isko.webp" 
                alt="ISkO" 
                style="width:100%; object-fit:cover;"
              >
            </a>
            <div style="padding:1rem;">
              <h3 style="margin-bottom:0.5rem;">
                <a 
                  href="../ISkO"  
                  style="display:inline-block; margin-top:0.5rem; color:#b21f2d; font-weight:bold;"
                >
                  ISkO
                </a>
              </h3>
              <p>In der Internationalen Skatordnung sind Skatregeln, Sonderfälle und Zählweisen definiert.</p>
              <a 
                href="../ISkO" 
                style="display:inline-block; margin-top:0.5rem; color:#b21f2d; font-weight:bold;"
              >
                Link zur ISkO 2022
              </a>
            </div>
          </div>
    
          <!-- 
          ================================
          2ND ROW (COMMENTED OUT)
          Uncomment these 4 cards when needed
          ================================
          Card 5
          
          <div class="news-item" 
               style="background-color:#f9f9f9; border-radius:4px; border-left:4px solid #b21f2d; overflow:hidden;">
            <a 
              href="#" 
              style="display:inline-block; margin-top:0.5rem; color:#b21f2d; font-weight:bold;"
            >
              <img 
                src="https://via.placeholder.com/400x300?text=Card+5" 
                alt="Dummy Card 5" 
                style="width:100%; object-fit:cover;"
              >
            </a>
            <div style="padding:1rem;">
              <h3 style="margin-bottom:0.5rem;">
                <a href="#" style="display:inline-block; color:#b21f2d; font-weight:bold;">Dummy Card 5</a>
              </h3>
              <p>Dummy description for Card 5.</p>
              <a href="#" style="display:inline-block; margin-top:0.5rem; color:#b21f2d; font-weight:bold;">
                Mehr Infos
              </a>
            </div>
          </div>
    
        Card 6
          <div class="news-item" 
               style="background-color:#f9f9f9; border-radius:4px; border-left:4px solid #b21f2d; overflow:hidden;">
            <a 
              href="#" 
              style="display:inline-block; margin-top:0.5rem; color:#b21f2d; font-weight:bold;"
            >
              <img 
                src="https://via.placeholder.com/400x300?text=Card+6" 
                alt="Dummy Card 6" 
                style="width:100%; object-fit:cover;"
              >
            </a>
            <div style="padding:1rem;">
              <h3 style="margin-bottom:0.5rem;">
                <a href="#" style="display:inline-block; color:#b21f2d; font-weight:bold;">Dummy Card 6</a>
              </h3>
              <p>Dummy description for Card 6.</p>
              <a href="#" style="display:inline-block; margin-top:0.5rem; color:#b21f2d; font-weight:bold;">
                Mehr Infos
              </a>
            </div>
          </div>
        Card 7
          <div class="news-item" 
               style="background-color:#f9f9f9; border-radius:4px; border-left:4px solid #b21f2d; overflow:hidden;">
            <a 
              href="#" 
              style="display:inline-block; margin-top:0.5rem; color:#b21f2d; font-weight:bold;"
            >
              <img 
                src="https://via.placeholder.com/400x300?text=Card+7" 
                alt="Dummy Card 7" 
                style="width:100%; object-fit:cover;"
              >
            </a>
            <div style="padding:1rem;">
              <h3 style="margin-bottom:0.5rem;">
                <a href="#" style="display:inline-block; color:#b21f2d; font-weight:bold;">Dummy Card 7</a>
              </h3>
              <p>Dummy description for Card 7.</p>
              <a href="#" style="display:inline-block; margin-top:0.5rem; color:#b21f2d; font-weight:bold;">
                Mehr Infos
              </a>
            </div>
          </div>
       Card 8
          <div class="news-item" 
               style="background-color:#f9f9f9; border-radius:4px; border-left:4px solid #b21f2d; overflow:hidden;">
            <a 
              href="#" 
              style="display:inline-block; margin-top:0.5rem; color:#b21f2d; font-weight:bold;"
            >
              <img 
                src="https://via.placeholder.com/400x300?text=Card+8" 
                alt="Dummy Card 8" 
                style="width:100%; object-fit:cover;"
              >
            </a>
            <div style="padding:1rem;">
              <h3 style="margin-bottom:0.5rem;">
                <a href="#" style="display:inline-block; color:#b21f2d; font-weight:bold;">Dummy Card 8</a>
              </h3>
              <p>Dummy description for Card 8.</p>
              <a href="#" style="display:inline-block; margin-top:0.5rem; color:#b21f2d; font-weight:bold;">
                Mehr Infos
              </a>
            </div>
          </div>
          -->
    
        </div> 
      </section>
    </div>
    <div id="error" class="error"></div>
    <button id="logout">Logout</button>
  </main>

  <!-- FOOTER, TODO: Inhalte dynamisch ausm Backend laden-->
  <footer>
    <div class="footer-content">
      <div class="footer-section">
        <h4>Kontakt</h4>
        <ul>
          <li>Skatverein Reizende Runde</li>
          <li>Köpenicker Landstraße 254</li>
          <li>12437 Berlin</li>
          <li><a href="mailto:info&#64;reizenderunde.de">info&#64;reizenderunde.de</a></li>
        </ul>
      </div>
      <div class="footer-section">
        <h4>Menü</h4>
        <ul>
          <li><a href="../#about">Über uns</a></li>
          <li><a href="../#aktuelles">Aktuelles</a></li>
          <li><a href="../#termine">Termine</a></li>
          <li><a href="../#mitglied">Mitglied werden</a></li>
          <li><a href="../#kontakt">Kontakt</a></li>
        </ul>
      </div>
      <div class="footer-section">
        <h4>Folge uns</h4>
        <ul>
          <li><a href="https://www.instagram.com/reizenderunde" target="_blank" rel="noopener noreferrer"><i class="fab fa-instagram-square"></i> Instagram</a></li>
        </ul>
      </div>
    </div>
    <div class="footer-bottom">
      © 2025 Reizende Runde – Alle Rechte vorbehalten.
    </div>
  </footer>
</body>


<script>
  // Replace with your Firebase project configuration
  const firebaseConfig = {

    apiKey: "AIzaSyAXnqylIvad60Aukj3DVNLoV-loRmZMd0g",
    authDomain: "reizendesbackend.firebaseapp.com",
    projectId: "reizendesbackend",
    storageBucket: "reizendesbackend.firebasestorage.app",
    messagingSenderId: "239229132288",
    appId: "1:239229132288:web:a398a64dba3fb0c7fac2e5"

    };


      firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();

        async function fetchProtectedContent() {
          const user = auth.currentUser;

          if (!user) {
            window.location.href = "../index.html";
            return;
          }
            //TODO: Fehlermeldungen überarbeiten 
          try {
            const doc = await db.collection("protectedContent").doc("MB").get();
            if (doc.exists) {
              const data = doc.data();
              console.log("Retrieved data:", data);

              // Update the content with Firestore data
              
              //Card1
                document.getElementById("c1img").src = data.Card1.image.src;
                document.getElementById("c1hrefimg").href = data.Card1.href;
                document.getElementById("c1img").alt = data.Card1.image.alt;
                document.getElementById("c1href").textContent = data.Card1.titel
                document.getElementById("c1href").href = data.Card1.href;
                document.getElementById("c1description").textContent = data.Card1.oneliner;
                document.getElementById("c1link").href = data.Card1.href;
                document.getElementById("c1link").textContent = data.Card1.linkText;



            } else {
              throw new Error("Kein Inhalt gefunden");
            }
          } catch (error) {
            console.error("Fehler beim Laden der Inhalte:", error);
            document.getElementById("loadingMessage").textContent =
              "Fehler beim Laden der Inhalte. Bitte versuche es später erneut.";
          }
        }

      // Check authentication state on page load
      auth.onAuthStateChanged((user) => {
        if (user) {
          fetchProtectedContent();
        } else {
          console.error("User not authenticated. Redirecting to login...");
          window.location.href = '..';
        }
      });

      // Logout functionality
      document.getElementById('logout').addEventListener('click', async () => {
        try {
          await auth.signOut();
          console.log("User logged out.");
          window.location.href = '..';
        } catch (error) {
          console.error("Error signing out:", error);
        }
      });
</script>
</html>
